# ğŸ”¬ ê¸°ìˆ  ìƒì„¸ ì„¤ëª…

ì‹œì¥ ê°€íŒëŒ€ OCR ì‹œìŠ¤í…œì˜ ê¸°ìˆ ì  êµ¬ì¡°ì™€ ì‘ë™ ì›ë¦¬

## ğŸ“ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ â”‚
â”‚  (ì›¹/ëª¨ë°”ì¼)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ì´ë¯¸ì§€ ì—…ë¡œë“œ
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì´ë¯¸ì§€ ì „ì²˜ë¦¬           â”‚
â”‚  - í¬ê¸° ì¡°ì •             â”‚
â”‚  - ë…¸ì´ì¦ˆ ì œê±°           â”‚
â”‚  - ëŒ€ë¹„ í–¥ìƒ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ì „ì²˜ë¦¬ëœ ì´ë¯¸ì§€
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OCR ì—”ì§„               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ GPT-4 Vision    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Google Vision   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Naver Clova     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ì¶”ì¶œëœ í…ìŠ¤íŠ¸
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í…ìŠ¤íŠ¸ íŒŒì‹± & êµ¬ì¡°í™”    â”‚
â”‚  - ìƒí’ˆëª… ì¶”ì¶œ           â”‚
â”‚  - ê°€ê²© ì¶”ì¶œ             â”‚
â”‚  - ë‹¨ìœ„ ì¶”ì¶œ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ JSON ë°ì´í„°
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê²°ê³¼ ë°˜í™˜              â”‚
â”‚  - JSON í˜•ì‹            â”‚
â”‚  - ë©”íƒ€ë°ì´í„°           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§  í•µì‹¬ ê¸°ìˆ 

### 1. ì´ë¯¸ì§€ ì „ì²˜ë¦¬ (OpenCV)

#### ëª©ì 
- OCR ì¸ì‹ë¥  í–¥ìƒ
- ë…¸ì´ì¦ˆ ì œê±°
- í…ìŠ¤íŠ¸ ì„ ëª…ë„ ê°œì„ 

#### ì£¼ìš” ê¸°ë²•

**a) ê·¸ë ˆì´ìŠ¤ì¼€ì¼ ë³€í™˜**
```python
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
```
- ì»¬ëŸ¬ ì •ë³´ë¥¼ ì œê±°í•˜ì—¬ í…ìŠ¤íŠ¸ ì¶”ì¶œì— ì§‘ì¤‘
- ì²˜ë¦¬ ì†ë„ í–¥ìƒ

**b) ê°€ìš°ì‹œì•ˆ ë¸”ëŸ¬ (ë…¸ì´ì¦ˆ ì œê±°)**
```python
denoised = cv2.GaussianBlur(gray, (5, 5), 0)
```
- ì´ë¯¸ì§€ì˜ ë¯¸ì„¸í•œ ë…¸ì´ì¦ˆ ì œê±°
- ê°€ê²©í‘œ ë°°ê²½ì˜ ë¶ˆí•„ìš”í•œ íŒ¨í„´ ì œê±°

**c) CLAHE (ëŒ€ë¹„ í–¥ìƒ)**
```python
clahe = cv2.createCLAHE(clipLimit=2.0, tileGridSize=(8, 8))
enhanced = clahe.apply(denoised)
```
- Contrast Limited Adaptive Histogram Equalization
- ì–´ë‘ìš´ ë¶€ë¶„ê³¼ ë°ì€ ë¶€ë¶„ì˜ ëŒ€ë¹„ë¥¼ ê°œì„ 
- ì†ê¸€ì”¨ì˜ íšì„ ë” ì„ ëª…í•˜ê²Œ ë§Œë“¦

**d) ì ì‘í˜• ì´ì§„í™”**
```python
binary = cv2.adaptiveThreshold(
    enhanced, 255, 
    cv2.ADAPTIVE_THRESH_GAUSSIAN_C, 
    cv2.THRESH_BINARY, 11, 2
)
```
- ì¡°ëª…ì´ ë¶ˆê· ì¼í•œ í™˜ê²½ì—ì„œë„ í…ìŠ¤íŠ¸ ì¶”ì¶œ
- ë°°ê²½ê³¼ ê¸€ìë¥¼ ëª…í™•í•˜ê²Œ ë¶„ë¦¬

### 2. OCR ì—”ì§„ ë¹„êµ

#### A. GPT-4 Vision (OpenAI) â­

**ì‘ë™ ì›ë¦¬:**
- ëŒ€ê·œëª¨ ì–¸ì–´ ëª¨ë¸(LLM) + ë¹„ì „ íŠ¸ëœìŠ¤í¬ë¨¸
- ì´ë¯¸ì§€ë¥¼ í† í°í™”í•˜ì—¬ í…ìŠ¤íŠ¸ì™€ í•¨ê»˜ ì²˜ë¦¬
- ë§¥ë½ì„ ì´í•´í•˜ì—¬ ìƒí’ˆëª…ê³¼ ê°€ê²©ì„ êµ¬ì¡°í™”

**ì¥ì :**
- ì†ê¸€ì”¨ ì¸ì‹ ì •í™•ë„ ìµœê³ 
- ë§¥ë½ ì´í•´ (ì˜ˆ: "ë§Œì›" â†’ "10000ì›" ë³€í™˜)
- êµ¬ì¡°í™”ëœ JSON ì§ì ‘ ì¶œë ¥
- ì¶”ê°€ í•™ìŠµ ë¶ˆí•„ìš”

**ë‹¨ì :**
- ë¹„ìš©ì´ ê°€ì¥ ë†’ìŒ (ì´ë¯¸ì§€ë‹¹ $0.01~0.03)
- ì²˜ë¦¬ ì†ë„ ì¤‘ê°„ (5-10ì´ˆ)
- ì¸í„°ë„· ì—°ê²° í•„ìˆ˜

**ì‚¬ìš© ì¼€ì´ìŠ¤:**
- ì†ê¸€ì”¨ê°€ ë§ì€ ì „í†µ ì‹œì¥
- ë†’ì€ ì •í™•ë„ê°€ í•„ìš”í•œ ê²½ìš°
- ë³µì¡í•œ ë ˆì´ì•„ì›ƒ

#### B. Google Cloud Vision

**ì‘ë™ ì›ë¦¬:**
- CNN(Convolutional Neural Network) ê¸°ë°˜
- í…ìŠ¤íŠ¸ ì˜ì—­ ê°ì§€ â†’ ë¬¸ì ì¸ì‹ â†’ ë‹¨ì–´ ì¡°í•©
- ë‹¤êµ­ì–´ ëª¨ë¸ (í•œê¸€ ì§€ì›)

**ì¥ì :**
- ë¹ ë¥¸ ì†ë„ (2-5ì´ˆ)
- ë¹„ìš© íš¨ìœ¨ì  ($0.0015/ì´ë¯¸ì§€)
- ì›” 1,000ê±´ ë¬´ë£Œ
- ì•ˆì •ì ì¸ API

**ë‹¨ì :**
- ì†ê¸€ì”¨ ì¸ì‹ë¥  ì¤‘ê°„
- êµ¬ì¡°í™” íŒŒì‹± ì¶”ê°€ í•„ìš”
- ë§¥ë½ ì´í•´ ì œí•œì 

**ì‚¬ìš© ì¼€ì´ìŠ¤:**
- ì¸ì‡„ëœ ê°€ê²©í‘œ
- ëŒ€ëŸ‰ ì²˜ë¦¬
- ë¹„ìš© ì ˆê° í•„ìš”

#### C. Naver Clova OCR

**ì‘ë™ ì›ë¦¬:**
- í•œê¸€ì— íŠ¹í™”ëœ ë”¥ëŸ¬ë‹ ëª¨ë¸
- í•œêµ­ í™˜ê²½ì— ìµœì í™”
- í…œí”Œë¦¿ ê¸°ë°˜ + AI ì¸ì‹

**ì¥ì :**
- í•œê¸€ ì†ê¸€ì”¨ ìš°ìˆ˜
- í•œêµ­ ì‹œì¥ íŠ¹í™” (ì›, ë§Œì› ë“±)
- ì›” 1,000ê±´ ë¬´ë£Œ
- êµ­ë‚´ ì„œë²„ë¡œ ë¹ ë¥¸ ì‘ë‹µ

**ë‹¨ì :**
- API ì‹ ì²­ ì ˆì°¨ í•„ìš”
- ë¬¸ì„œ ìœ„ì£¼ ìµœì í™”
- êµ¬ì¡°í™” íŒŒì‹± ì¶”ê°€ í•„ìš”

**ì‚¬ìš© ì¼€ì´ìŠ¤:**
- í•œêµ­ ì‹œì¥ ì „ìš©
- ê°œì¸ì •ë³´ ë³´í˜¸ (êµ­ë‚´ ì„œë²„)
- í•œê¸€ íŠ¹í™” í•„ìš”

### 3. í…ìŠ¤íŠ¸ íŒŒì‹±

#### ì •ê·œí‘œí˜„ì‹ ê¸°ë°˜ íŒŒì‹±
```python
# ê°€ê²© íŒ¨í„´
price_pattern = r'(\d[\d,]*)\s*ì›|(\d+)\s*ë§Œ\s*ì›'

# ì˜ˆì‹œ:
# "800ì›" â†’ 800ì›
# "5,000ì›" â†’ 5000ì›
# "1ë§Œì›" â†’ 10000ì›
# "1ì†Œì¿ ë¦¬ ë§Œì›" â†’ 10000ì›
```

#### GPT-4 Visionì˜ êµ¬ì¡°í™”
- í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ìœ¼ë¡œ JSON ì§ì ‘ ìƒì„±
- ìƒí’ˆëª…, ê°€ê²©, ë‹¨ìœ„ë¥¼ ìë™ ë¶„ë¥˜
- ì¶”ê°€ ì •ë³´ (ê´„í˜¸ ì•ˆ ë‚´ìš© ë“±) ì¶”ì¶œ

### 4. API ì„¤ê³„ (FastAPI)

#### RESTful ì—”ë“œí¬ì¸íŠ¸

**POST /ocr**
- ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ì²˜ë¦¬
- FormData í˜•ì‹ (multipart/form-data)
- ì‘ë‹µ: JSON í˜•ì‹ ê²°ê³¼

**POST /ocr/batch**
- ì—¬ëŸ¬ ì´ë¯¸ì§€ ë™ì‹œ ì²˜ë¦¬
- ë°°ì¹˜ ì²˜ë¦¬ë¡œ íš¨ìœ¨ì„± í–¥ìƒ
- ìµœëŒ€ 10ê°œ ì´ë¯¸ì§€

**GET /health**
- ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
- ë¡œë“œ ë°¸ëŸ°ì„œ í—¬ìŠ¤ ì²´í¬ìš©

#### ë¹„ë™ê¸° ì²˜ë¦¬
```python
async def process_ocr(file: UploadFile):
    # ë¹„ë™ê¸°ë¡œ íŒŒì¼ ì½ê¸°
    content = await file.read()
    
    # OCR ì²˜ë¦¬ (ë³„ë„ ìŠ¤ë ˆë“œ)
    result = await asyncio.to_thread(
        processor.process_image, 
        temp_path
    )
```

### 5. ì›¹ ì¸í„°í˜ì´ìŠ¤ (Streamlit)

#### ì‹¤ì‹œê°„ ì²˜ë¦¬
```python
if st.button("OCR ì‹œì‘"):
    with st.spinner("ì²˜ë¦¬ ì¤‘..."):
        result = processor.process_image(image_path)
    st.success("ì™„ë£Œ!")
    st.json(result)
```

#### ìƒíƒœ ê´€ë¦¬
- ì„¸ì…˜ ìƒíƒœë¡œ ì´ë¯¸ì§€ ë° ê²°ê³¼ ìœ ì§€
- ìºì‹±ìœ¼ë¡œ ë°˜ë³µ ì²˜ë¦¬ ë°©ì§€

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### API í‚¤ ê´€ë¦¬
```python
# .env íŒŒì¼ ì‚¬ìš© (Gitì—ì„œ ì œì™¸)
OPENAI_API_KEY=sk-...

# ì½”ë“œì—ì„œ ì§ì ‘ ë…¸ì¶œ ê¸ˆì§€
# âŒ api_key = "sk-xxxxx"
# âœ… api_key = os.getenv("OPENAI_API_KEY")
```

### íŒŒì¼ ì—…ë¡œë“œ ê²€ì¦
```python
# íŒŒì¼ í˜•ì‹ ì œí•œ
allowed_extensions = [".jpg", ".jpeg", ".png", ".webp"]

# íŒŒì¼ í¬ê¸° ì œí•œ
max_file_size = 10 * 1024 * 1024  # 10MB

# ì•…ì„± íŒŒì¼ ë°©ì§€
if not is_valid_image(file):
    raise HTTPException(400, "ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë¯¸ì§€")
```

### ì„ì‹œ íŒŒì¼ ê´€ë¦¬
```python
# ì„ì‹œ íŒŒì¼ì€ ì²˜ë¦¬ í›„ ì¦‰ì‹œ ì‚­ì œ
try:
    process_image(temp_file)
finally:
    os.unlink(temp_file)
```

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### 1. ì´ë¯¸ì§€ í¬ê¸° ìµœì í™”
```python
# ë„ˆë¬´ í° ì´ë¯¸ì§€ëŠ” ë¦¬ì‚¬ì´ì¦ˆ
max_dimension = 2048
if width > max_dimension or height > max_dimension:
    scale = max_dimension / max(width, height)
    new_size = (int(width * scale), int(height * scale))
    image = image.resize(new_size)
```

### 2. ìºì‹±
```python
# Streamlit ìºì‹±
@st.cache_data
def load_model():
    return OCRProcessor()

# ê²°ê³¼ ìºì‹± (ë™ì¼ ì´ë¯¸ì§€ ì¬ì²˜ë¦¬ ë°©ì§€)
```

### 3. ë³‘ë ¬ ì²˜ë¦¬
```python
# ë°°ì¹˜ ì²˜ë¦¬ ì‹œ ë³‘ë ¬ ì‹¤í–‰
import concurrent.futures

with concurrent.futures.ThreadPoolExecutor() as executor:
    results = executor.map(process_image, image_list)
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
```python
def test_preprocess_image():
    image = cv2.imread("test.jpg")
    result = preprocess_image(image)
    assert result is not None
    assert result.shape[2] == 1  # ê·¸ë ˆì´ìŠ¤ì¼€ì¼

def test_parse_price():
    text = "ì‚¬ê³¼ 5,000ì›"
    result = parse_text_to_products(text)
    assert result[0]["price"] == "5,000ì›"
```

### í†µí•© í…ŒìŠ¤íŠ¸
```python
def test_end_to_end():
    processor = MarketOCRProcessor()
    result = processor.process_image("sample.jpg")
    assert "products" in result
    assert len(result["products"]) > 0
```

### ë¶€í•˜ í…ŒìŠ¤íŠ¸
```bash
# Apache Benchë¡œ API ë¶€í•˜ í…ŒìŠ¤íŠ¸
ab -n 100 -c 10 -p image.json -T application/json \
   http://localhost:8000/ocr
```

## ğŸš€ ë°°í¬ ì˜µì…˜

### 1. ë¡œì»¬ ê°œë°œ
```bash
streamlit run app_streamlit.py
# ë˜ëŠ”
uvicorn app_fastapi:app --reload
```

### 2. Docker ì»¨í…Œì´ë„ˆ
```dockerfile
FROM python:3.10
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["streamlit", "run", "app_streamlit.py"]
```

### 3. í´ë¼ìš°ë“œ ë°°í¬

**Heroku:**
```bash
git push heroku main
```

**Google Cloud Run:**
```bash
gcloud run deploy --source .
```

**AWS Lambda + API Gateway:**
- Serverless í”„ë ˆì„ì›Œí¬ ì‚¬ìš©
- ì´ë¯¸ì§€ëŠ” S3ì— ì €ì¥

## ğŸ“ˆ í™•ì¥ ê°€ëŠ¥ì„±

### 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
```python
# PostgreSQLì— ê²°ê³¼ ì €ì¥
import psycopg2

conn = psycopg2.connect(database_url)
cursor = conn.cursor()
cursor.execute(
    "INSERT INTO products (name, price) VALUES (%s, %s)",
    (product_name, price)
)
```

### 2. ì‹¤ì‹œê°„ ì¹´ë©”ë¼ ìŠ¤íŠ¸ë¦¼
```python
# ì›¹ìº ì—ì„œ ì‹¤ì‹œê°„ OCR
import cv2

cap = cv2.VideoCapture(0)
while True:
    ret, frame = cap.read()
    result = processor.process_frame(frame)
    # ê²°ê³¼ ì˜¤ë²„ë ˆì´
```

### 3. ê°€ê²© ë³€ë™ ì¶”ì 
```python
# ì‹œê°„ë³„ ê°€ê²© ë³€í™” ëª¨ë‹ˆí„°ë§
def track_price_changes(product_name):
    history = get_price_history(product_name)
    return calculate_trend(history)
```

### 4. ë‹¤êµ­ì–´ ì§€ì›
```python
# ì–¸ì–´ ê°ì§€ ë° ì²˜ë¦¬
from langdetect import detect

language = detect(extracted_text)
if language == 'ko':
    parse_korean_format(text)
elif language == 'en':
    parse_english_format(text)
```

## ğŸ”¬ ì•Œë ¤ì§„ ì œí•œì‚¬í•­

### 1. ì†ê¸€ì”¨ í’ˆì§ˆ
- ë§¤ìš° íë¦¿í•˜ê±°ë‚˜ íŠ¹ì´í•œ í•„ì²´ëŠ” ì¸ì‹ ì–´ë ¤ì›€
- í•´ê²°ì±…: ì´ë¯¸ì§€ í’ˆì§ˆ í–¥ìƒ, GPT-4 Vision ì‚¬ìš©

### 2. ë³µì¡í•œ ë°°ê²½
- ìƒí’ˆê³¼ ê°€ê²©í‘œê°€ ê²¹ì³ìˆëŠ” ê²½ìš°
- í•´ê²°ì±…: Object Detectionìœ¼ë¡œ ê°€ê²©í‘œë§Œ ì¶”ì¶œ

### 3. ë¹„í‘œì¤€ í‘œê¸°
- "ë§Œì›", "ì²œì›" ë“± í•œê¸€ í‘œê¸°
- í•´ê²°ì±…: GPT-4 Visionì˜ ë§¥ë½ ì´í•´ í™œìš©

### 4. ë„¤íŠ¸ì›Œí¬ ì˜ì¡´ì„±
- ëª¨ë“  OCR ë°©ë²•ì´ API í˜¸ì¶œ í•„ìš”
- í•´ê²°ì±…: Tesseract ë“± ì˜¤í”„ë¼ì¸ OCR ì¶”ê°€

## ğŸ“š ì°¸ê³  ìë£Œ

- [OpenAI Vision API ë¬¸ì„œ](https://platform.openai.com/docs/guides/vision)
- [Google Cloud Vision ê°€ì´ë“œ](https://cloud.google.com/vision/docs)
- [Naver Clova OCR](https://www.ncloud.com/product/aiService/ocr)
- [OpenCV íŠœí† ë¦¬ì–¼](https://docs.opencv.org/)
- [FastAPI ë¬¸ì„œ](https://fastapi.tiangolo.com/)
- [Streamlit ë¬¸ì„œ](https://docs.streamlit.io/)












